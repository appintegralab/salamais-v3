import{_ as U,cO as x,cP as V,cQ as C,cR as F,i as T,r as b,a as y,s as q,P as u,R as Q,j as D,k as p,l as z,K as i,h as t,W as N,T as I,U as P,c as _,d as w,V as E,O as c,f as s,Y as A,g as $,X as R,M as k,N as h,F as j,cS as B,Z as K,a0 as v,a1 as O,m as H,b as J,a2 as L,L as M}from"./index.2bd1149f.js";import{Q as W,a as g}from"./QTr.6ba7f04a.js";import{Q as X}from"./QImg.297fc3cd.js";import{Q as Y}from"./QTable.6c172721.js";import"./QLinearProgress.69a859f2.js";const Z={components:{},props:{},data(){return{dialog:!1,user:null,newUser:!1,inputCss:{inner:"h-7 text-[8pt] fw-700"},areas:[],formData:{areas:[]},optionsCampus:[]}},computed:{optionsIES(){let l=[];for(let e in x)l.push({label:x[e].nome,value:e});return l},optionsCargos(){let l=[];for(let e in V)l.push({label:V[e].cargo,value:e});return l},optionsRegionais(){let l=[];for(let e in C)l.push({label:C[e].regional,value:e});return l}},watch:{"formData.ies":function(){console.log("ies mudou"),this.optionsCampus=[];let l=this.formData.ies;if(x[l]!=null)for(let e in x[l].campus)this.optionsCampus.push({label:F[e].nome,value:e})}},mounted(){let l=this;T(b(y,"/salamais/areas")).then(e=>{l.areas=q(e)})},methods:{show(l){let e={};if(l==null)this.newUser=!0,e={admin:!1,areasIC:{},areas:[],cargo:"Professor(a)",cpf:"",email:"",formacao:{area:"",titulacao:""},grandeArea:0,ies:"USJT",nome:"",regional:"SP",senha:"",telefone:"",unidade:"",urlCapa:"https://placeimg.com/1200/200/nature",urlFoto:"https://firebasestorage.googleapis.com/v0/b/appintegra-d8424.appspot.com/o/responsaveis%2Fdummy.png?alt=media&token=f785c7d3-f03c-4311-acec-983e2f9e9103"};else{if(e=JSON.parse(JSON.stringify(l)),e.areas==null)if(e.areasIC!=null){e.areas=[];for(let d in e.areasIC)e.areas.push(e.areasIC[d].sigla)}else e.areas=[];this.newUser=!1}console.log("user",e),this.formData=e,this.dialog=!0},uuidv4(l){return l.normalize("NFD").replace(/[ \u0300-\u036f]/g,"").toUpperCase().substr(0,10)+([1e7]+-1e3+-4e3+-8e3+-1e11).replace(/[018]/g,d=>(d^crypto.getRandomValues(new Uint8Array(1))[0]&15>>d/4).toString(16)).substr(0,6)},submitHandler(){let l=this;if(console.log("this.formData",this.formData),this.formData.nome==""){this.$q.notify(u.error("Nome obrigat\xF3rio!"));return}if(this.formData.cpf==""){this.$q.notify(u.error("CPF obrigat\xF3rio!"));return}if(this.formData.email==""){this.$q.notify(u.error("Email obrigat\xF3rio!"));return}if(!/^\w+([\.-]?\w+)*@\w+([\.-]?\w+)*(\.\w{2,3})+$/.test(this.formData.email)){this.$q.notify(u.error("Email inv\xE1lido!"));return}if(this.formData.telefone==""){this.$q.notify(u.error("Telefone obrigat\xF3rio!"));return}if(this.formData.areas.length==0){this.$q.notify(u.error("Sele\xE7\xE3o de \xC1rea \xE9 obrigat\xF3ria!"));return}if(this.formData.id==null){let d=this.uuidv4(this.formData.nome);console.log(d),this.formData.id=d}this.formData.cpf=this.formData.cpf.replaceAll("-","").replaceAll(".",""),console.log(this.formData),Q(b(y,"/salamais/usuarios/"+this.formData.id),this.formData),this.$q.notify(u.success("Usu\xE1rio salvo com sucesso!")),l.dialog=!1}}},G=s("span",{class:"iconify text-lg","data-icon":"ic:person"},null,-1),ee={key:0,class:"text-base"},se={key:1,class:"text-base"},oe={class:"border rounded shadow p-2 m-1 mx-3"},te={class:"px-2"},le={class:"px-2 mb-3"},ae=s("div",{class:"fw-600 text-[9pt]"},"CPF *",-1),ie={class:"col-span-1 px-2"},ne={class:"grid grid-cols-2"},re={class:"col-span-1 px-2"},de={class:"col-span-1 px-2"},ue={class:"grid grid-cols-3"},ce={class:"col-span-1 px-2"},me={class:"col-span-1 px-2"},fe={class:"col-span-1 px-2"},pe={class:"px-2 mb-3"},_e=s("div",{class:"fw-600 text-[9pt]"},"\xC1reas de conhecimento *",-1),he={class:"border rounded p-1"},ge={class:"grid grid-cols-2"},ve={class:"flex items-center"},xe={class:"mt-1 border-t pt-2 px-2"},be={class:"flex justify-center"},ye=s("span",{class:"iconify text-base mr-1","data-icon":"ic:save"},null,-1),we=v(" salvar informa\xE7\xF5es ");function De(l,e,d,S,o,m){const r=D("FormKit");return p(),z(K,{modelValue:o.dialog,"onUpdate:modelValue":e[9]||(e[9]=a=>o.dialog=a)},{default:i(()=>[t(B,{class:"w-[470px]"},{default:i(()=>[t(N,{class:"h-[20px]"},{default:i(()=>[t(I,{size:"28px",class:"bg-slate-300"},{default:i(()=>[G]),_:1}),t(P,null,{default:i(()=>[o.newUser?(p(),_("span",ee," Adicionar usu\xE1rio ")):w("",!0),o.newUser?w("",!0):(p(),_("span",se," Editar dados pessoais "))]),_:1}),E(t(c,{flat:"",round:"",dense:"",icon:"close"},null,512),[[O]])]),_:1}),s("div",oe,[t(r,{id:"formacao",type:"form",actions:!1,onSubmit:m.submitHandler},{default:i(()=>[s("div",te,[t(r,{modelValue:o.formData.nome,"onUpdate:modelValue":e[0]||(e[0]=a=>o.formData.nome=a),label:"Nome completo *",help:"Indique seu nome completo",classes:o.inputCss,validation:"required"},null,8,["modelValue","classes"])]),s("div",le,[ae,t(A,{class:"text-xs",dense:"",outlined:"",modelValue:o.formData.cpf,"onUpdate:modelValue":e[1]||(e[1]=a=>o.formData.cpf=a),mask:"###.###.###-##"},null,8,["modelValue"])]),s("div",ie,[t(r,{type:"email",modelValue:o.formData.email,"onUpdate:modelValue":e[2]||(e[2]=a=>o.formData.email=a),label:"Email *",help:"Indique um email v\xE1lido",classes:o.inputCss,validation:"required|email"},null,8,["modelValue","classes"])]),s("div",ne,[s("div",re,[t(r,{type:"tel",modelValue:o.formData.telefone,"onUpdate:modelValue":e[3]||(e[3]=a=>o.formData.telefone=a),label:"Telefone *",help:"Indique um telefone (99) 9999-9999",classes:o.inputCss,validation:"required"},null,8,["modelValue","classes"])]),s("div",de,[t(r,{type:"select",modelValue:o.formData.cargo,"onUpdate:modelValue":e[4]||(e[4]=a=>o.formData.cargo=a),label:"Cargo (fun\xE7\xE3o)",help:"Indique cargo / fun\xE7\xE3o de atua\xE7\xE3o",classes:o.inputCss,options:m.optionsCargos},null,8,["modelValue","classes","options"])])]),s("div",ue,[s("div",ce,[t(r,{type:"select",modelValue:o.formData.ies,"onUpdate:modelValue":e[5]||(e[5]=a=>o.formData.ies=a),label:"Unidade (IES)",help:"Indique a unidade de atua\xE7\xE3o",classes:o.inputCss,options:m.optionsIES},null,8,["modelValue","classes","options"])]),s("div",me,[t(r,{type:"select",modelValue:o.formData.campus,"onUpdate:modelValue":e[6]||(e[6]=a=>o.formData.campus=a),label:"Campus",help:"Indique o campus de atua\xE7\xE3o",classes:o.inputCss,options:o.optionsCampus},null,8,["modelValue","classes","options"])]),s("div",fe,[t(r,{type:"select",modelValue:o.formData.regional,"onUpdate:modelValue":e[7]||(e[7]=a=>o.formData.regional=a),label:"Regional",help:"Indique a regional de atua\xE7\xE3o",classes:o.inputCss,options:m.optionsRegionais},null,8,["modelValue","classes","options"])])]),s("div",pe,[_e,s("div",he,[s("div",ge,[(p(!0),_(j,null,$(o.areas,(a,n)=>(p(),_("div",{key:n},[t(R,{size:"30px",modelValue:o.formData.areas,"onUpdate:modelValue":e[8]||(e[8]=f=>o.formData.areas=f),val:a.id,color:"grey"},{default:i(()=>[s("div",ve,[l.$q.screen.xs?w("",!0):(p(),_("div",{key:0,style:k("background-color:"+a.cor),class:"text-[5pt] fw-400 py-0 px-1 rounded text-white"},h(a.sigla),5)),s("div",{style:k("color:"+a.cor),class:"ml-1 text-[6pt] sm:text-[6pt] fw-600"},h(a.nome),5)])]),_:2},1032,["modelValue","val"])]))),128))])])]),s("div",xe,[s("div",be,[t(c,{onClick:m.submitHandler,size:"sm",outline:"",class:"flex items-center"},{default:i(()=>[ye,we]),_:1},8,["onClick"])])])]),_:1},8,["onSubmit"])])]),_:1})]),_:1},8,["modelValue"])}var Ve=U(Z,[["render",De]]);const Ce={components:{dialoguser:Ve},data(){return{filter:"",columns:[{label:"ID",align:"left",sortable:!0},{label:"Nome",field:"nome",align:"left",sortable:!0},{label:"cpf",field:"cpf",align:"left",sortable:!0},{label:"email",align:"left",sortable:!0},{label:"",sortable:!1}],rows:[],removeDialog:{}}},computed:{moment(){return H}},mounted(){this.load()},methods:{load(){let l=this;J(b(y,"/salamais/usuarios"),e=>{l.rows=q(e)})},excluir(l){let e=this;this.removeDialog=!1,console.log(l),Q(b(y,"/salamais/usuarios/"+l.id),null),e.$q.notify(u.success("Usu\xE1rio excluido com sucesso"))}}},ke=s("div",{class:"mx-4 my-1 pt-2 fw-500"}," Usu\xE1rios ",-1),Ue={class:"mx-4"},qe={class:"w-full"},Qe={class:"p-1 flex items-center justify-between"},Ie={class:"flex items-center"},Se={class:"-mb-2"},Fe=s("div",{class:"pl-1"},[s("span",{class:"iconify text-[14pt]","data-icon":"mi:search"})],-1),Te=s("span",{class:"iconify text-[12pt] mr-1","data-icon":"ion:add-circle-outline"},null,-1),ze=v(" adicionar usu\xE1rio "),Ne={class:"text-[6pt]"},Pe={class:"flex items-center"},Ee={class:"ml-1"},Ae={class:"text-[7pt]"},$e={class:"ml-1"},Re=s("span",{class:"iconify text-[7pt]","data-icon":"ic:outline-remove-red-eye"},null,-1),je=v(" ver perfil "),Be={class:"text-[7pt]"},Ke={class:"text-[7pt]"},Oe=s("span",{class:"iconify text-[10pt]","data-icon":"mi:edit"},null,-1),He=s("span",{class:"iconify text-[10pt]","data-icon":"mi:delete"},null,-1),Je={class:"rounded w-[200px]"},Le=s("div",{class:"flex p-1 bg-red-800 text-white"},[s("div",{class:"text-[10pt] px-1"},[s("span",{class:"iconify","data-icon":"mdi:warning"})]),s("div",{class:"text-[8pt] fw-700"},"Deseja realmente excluir o item?")],-1),Me={class:"flex justify-around p-2"},We=v("cancelar "),Xe=v(" sim");function Ye(l,e,d,S,o,m){const r=D("FormKit"),a=D("dialoguser");return p(),_("div",null,[ke,s("div",Ue,[t(Y,{dense:"",pagination:{rowsPerPage:20},rows:o.rows,filter:o.filter,columns:o.columns,"row-key":"name"},{top:i(()=>[s("div",qe,[s("div",Qe,[s("div",Ie,[s("div",Se,[t(r,{modelValue:o.filter,"onUpdate:modelValue":e[0]||(e[0]=n=>o.filter=n),classes:{inner:"h-7"},type:"text",placeholder:"Filtrar"},null,8,["modelValue"])]),Fe]),s("div",null,[t(c,{size:"xs",class:"px-2",onClick:e[1]||(e[1]=n=>l.$refs.dialoguserref.show())},{default:i(()=>[Te,ze]),_:1})])])])]),body:i(n=>[t(W,{props:n},{default:i(()=>[t(g,null,{default:i(()=>[s("span",Ne,h(n.row.id),1)]),_:2},1024),t(g,null,{default:i(()=>[s("div",Pe,[t(I,{size:"xs"},{default:i(()=>[t(X,{class:"w-[20px] h-[20px]",src:n.row.urlFoto},null,8,["src"])]),_:2},1024),s("div",Ee,[s("span",Ae,h(n.row.nome),1)]),s("div",$e,[t(c,{size:"5px",round:"",onClick:f=>l.$router.push({path:"/profile/"+n.row.id})},{default:i(()=>[Re,t(L,null,{default:i(()=>[je]),_:1})]),_:2},1032,["onClick"])])])]),_:2},1024),t(g,null,{default:i(()=>[s("span",Be,h(n.row.cpf),1)]),_:2},1024),t(g,null,{default:i(()=>[s("span",Ke,h(n.row.email),1)]),_:2},1024),t(g,null,{default:i(()=>[t(c,{onClick:f=>l.$refs.dialoguserref.show(n.row),round:"",size:"xs",class:"bg-gray-200"},{default:i(()=>[Oe]),_:2},1032,["onClick"]),t(c,{round:"",size:"xs",class:"ml-2 bg-gray-400"},{default:i(()=>[He,t(M,{modelValue:o.removeDialog[n.row.id],"onUpdate:modelValue":f=>o.removeDialog[n.row.id]=f},{default:i(()=>[s("div",Je,[Le,s("div",Me,[t(c,{onClick:f=>o.removeDialog[n.row.id]=!1,size:"xs"},{default:i(()=>[We]),_:2},1032,["onClick"]),t(c,{onClick:f=>m.excluir(n.row),class:"bg-red-800 text-white",size:"xs"},{default:i(()=>[Xe]),_:2},1032,["onClick"])])])]),_:2},1032,["modelValue","onUpdate:modelValue"])]),_:2},1024)]),_:2},1024)]),_:2},1032,["props"])]),_:1},8,["rows","filter","columns"])]),t(a,{ref:"dialoguserref"},null,512)])}var ts=U(Ce,[["render",Ye]]);export{ts as default};

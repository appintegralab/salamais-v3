var S=Object.defineProperty,Q=Object.defineProperties;var q=Object.getOwnPropertyDescriptors;var U=Object.getOwnPropertySymbols;var M=Object.prototype.hasOwnProperty,H=Object.prototype.propertyIsEnumerable;var $=(s,t,a)=>t in s?S(s,t,{enumerable:!0,configurable:!0,writable:!0,value:a}):s[t]=a,w=(s,t)=>{for(var a in t||(t={}))M.call(t,a)&&$(s,a,t[a]);if(U)for(var a of U(t))H.call(t,a)&&$(s,a,t[a]);return s},Y=(s,t)=>Q(s,q(t));import{p as B,cT as K,cU as j,cV as J,C as z,n as E,Q as O,_ as P,m as b,P as v,j as g,k as h,c as _,f as e,h as n,K as i,O as p,d as D,a0 as f,N as d,F as R,g as G,a2 as F,cW as L,R as T,r as I,a as V,l as A,V as W,W as Z,Y as X,Z as ee,a1 as se,b as te,s as oe,L as ae}from"./index.2bd1149f.js";import{Q as ne,a as C}from"./QTr.6ba7f04a.js";import{Q as ie}from"./QTable.6c172721.js";import{_ as N}from"./lodash.b87f4b09.js";import"./QLinearProgress.69a859f2.js";var k=B({name:"QToggle",props:Y(w({},K),{icon:String,iconColor:String}),emits:j,setup(s){function t(a,x){const o=z(()=>(a.value===!0?s.checkedIcon:x.value===!0?s.indeterminateIcon:s.uncheckedIcon)||s.icon),l=z(()=>a.value===!0?s.iconColor:null);return()=>[E("div",{class:"q-toggle__track"}),E("div",{class:"q-toggle__thumb absolute flex flex-center no-wrap"},o.value!==void 0?[E(O,{name:o.value,color:l.value})]:void 0)]}return J("toggle",t)}});const re={data(){return{encontros:[],inscrPorEncontro:!1,multiplaInscr:!1,turmasPorArea:!1,periodo:{dataInicio:"",dataTermino:""},encontro:{id:"",data:"",horaInicio:"",horaTermino:"",salaIDCtrl:1}}},computed:{moment(){return b}},mounted(){},methods:{salaEmpty(){return{id:"sala1",cancelado:!1,link:"",facilitador:"",inscricoes:[]}},encontroEmpty(){return{id:"",data:"",horaInicio:"",horaTermino:"",salaIDCtrl:1,areas:{"AU&D":{salaIDCtrl:1,salas:{sala1:this.salaEmpty()}},"C&A":{salaIDCtrl:1,salas:{sala1:this.salaEmpty()}},"CA&MA":{salaIDCtrl:1,salas:{sala1:this.salaEmpty()}},"CB&S":{salaIDCtrl:1,salas:{sala1:this.salaEmpty()}},CH:{salaIDCtrl:1,salas:{sala1:this.salaEmpty()}},CJ:{salaIDCtrl:1,salas:{sala1:this.salaEmpty()}},ENG:{salaIDCtrl:1,salas:{sala1:this.salaEmpty()}},"G&N":{salaIDCtrl:1,salas:{sala1:this.salaEmpty()}},"T&H":{salaIDCtrl:1,salas:{sala1:this.salaEmpty()}},"TI&C":{salaIDCtrl:1,salas:{sala1:this.salaEmpty()}}},salas:{sala1:this.salaEmpty()}}},reset(){this.encontros=[],this.inscrPorEncontro=!1,this.multiplaInscr=!1,this.turmasPorArea=!1,this.periodo={dataInicio:"",dataTermino:""},this.encontro=this.encontroEmpty()},init(s){this.encontros=s.encontros,this.inscrPorEncontro=s.inscrPorEncontro,this.multiplaInscr=s.multiplaInscr,this.turmasPorArea=s.turmasPorArea,this.periodo={dataInicio:s.dataInicio,dataTermino:s.dataTermino},this.encontro=this.encontroEmpty()},getEncontros(){return{encontros:this.encontros,dataInicio:this.periodo.dataInicio,dataTermino:this.periodo.dataTermino,inscrPorEncontro:this.inscrPorEncontro,multiplaInscr:this.multiplaInscr,turmasPorArea:this.turmasPorArea}},uuidv4(s){return s.normalize("NFD").replace(/[ \u0300-\u036f]/g,"").toUpperCase().substr(0,10)+([1e7]+-1e3+-4e3+-8e3+-1e11).replace(/[018]/g,a=>(a^crypto.getRandomValues(new Uint8Array(1))[0]&15>>a/4).toString(16)).substr(0,6)},addEncontro(){if(this.encontro.data==null||this.encontro.data.trim()==""){this.$q.notify(v.error("Data do encontro obrigat\xF3ria!"));return}if(this.encontro.horaInicio==null||this.encontro.horaInicio.trim()==""){this.$q.notify(v.error("Hor\xE1rio de in\xEDcio do encontro obrigat\xF3rio!"));return}if(this.encontro.horaTermino==null||this.encontro.horaTermino.trim()==""){this.$q.notify(v.error("Hor\xE1rio de t\xE9rmino do encontro obrigat\xF3rio!"));return}let s=JSON.parse(JSON.stringify(this.encontro));s.data=b(s.data).format(),s.id=this.uuidv4("ENC-"),console.log(s),this.encontros.push(s),this.encontros=N.orderBy(this.encontros,["data","horaInicio"],["asc","asc"]),console.log("this.encontros",this.encontros),this.atualizaPeriodo()},removerEncontro(s){console.log(s),this.encontros.splice(s,1),this.atualizaPeriodo()},atualizaPeriodo(){let s=b("2099-01-01").format(),t=b("1099-01-01").format();for(let a in this.encontros)this.encontros[a].data<s&&(s=this.encontros[a].data),this.encontros[a].data>t&&(t=this.encontros[a].data);this.periodo.dataInicio=s,this.periodo.dataTermino=t}}},le={class:"my-2 border border-gray-500 rounded p-2"},ce=e("div",{class:"-mt-[14px] ml-1 text-[9pt] fw-700 px-1 bg-white w-[70px]"}," Encontro(s) ",-1),de={class:"p-1 mt-1 mb-2 border rounded"},me={class:"p-1"},ue=e("span",{class:"ml-1 text-xs fw-300"},"Inscri\xE7\xF5es por encontros",-1),he={class:"p-1"},pe=e("span",{class:"ml-1 text-xs fw-300"},"Permitir inscri\xE7\xF5es em mais de um encontro",-1),fe={class:"p-1"},_e=e("span",{class:"ml-1 text-xs fw-300"},"Dividir encontros por \xE1reas de conhecimento",-1),xe={class:"flex mt-1 justify-center"},ve={class:"flex items-center mt-1"},ge={class:"text-[8pt]"},be={class:"text-[8pt] pl-2 pr-1"},ye={class:"text-[8pt] px-1 pr-3"},we={class:"ml-2"},De=e("span",{class:"iconify text-[7pt] mr-1","data-icon":"ion:add-circle-outline"},null,-1),Ce=e("span",{class:"lowercase text-[7pt]"},"adicionar",-1),Ie={class:"flex items-center rounded bg-slate-200 p-1 mt-1"},Ve=e("div",{class:"text-[8pt] fw-500"}," Per\xEDodo: ",-1),Ee={key:0,class:"pl-2 text-[8pt] fw-400"},ke={key:1,class:"flex"},Te=e("div",{class:"pl-2 text-[8pt] fw-400"}," De ",-1),Pe={class:"text-[8pt] fw-500 px-2"},Ue={class:"fw-300 text-[7pt] capitalize"},$e=e("div",{class:"text-[8pt] fw-400"}," at\xE9 ",-1),Ye={class:"text-[8pt] fw-500 px-2"},ze={class:"fw-300 text-[7pt] capitalize"},Ae={class:"mt-2 text-[8pt] px-1 border rounded flex-1 bg-slate-200"},Fe=e("div",{class:"fw-500 border-b border-gray-300"}," Encontros: ",-1),Ne={key:0,class:"my-1 text-[8pt] fw-400"},Se={key:1,class:"py-1"},Qe={class:"fw-600"},qe={class:"fw-300 text-[9pt] capitalize"},Me=e("div",{class:"pl-1"},"-",-1),He={class:"pl-1 fw-500"},Be=e("div",{class:"pl-1"},"\xE0s",-1),Ke={class:"pl-1 fw-500"},je={class:"flex-1 text-right pr-1"},Je=e("span",{class:"text-[7pt] iconify","data-icon":"line-md:remove"},null,-1),Oe=f("Remover encontro");function Re(s,t,a,x,o,l){const m=g("FormKit");return h(),_("div",le,[ce,e("div",de,[e("div",me,[n(k,{dense:"",size:"xs",modelValue:o.inscrPorEncontro,"onUpdate:modelValue":t[0]||(t[0]=r=>o.inscrPorEncontro=r)},null,8,["modelValue"]),ue]),e("div",he,[n(k,{dense:"",size:"xs",modelValue:o.multiplaInscr,"onUpdate:modelValue":t[1]||(t[1]=r=>o.multiplaInscr=r)},null,8,["modelValue"]),pe]),e("div",fe,[n(k,{dense:"",size:"xs",modelValue:o.turmasPorArea,"onUpdate:modelValue":t[2]||(t[2]=r=>o.turmasPorArea=r)},null,8,["modelValue"]),_e])]),e("div",xe,[e("div",null,[e("div",ve,[e("div",ge,[n(m,{modelValue:o.encontro.data,"onUpdate:modelValue":t[3]||(t[3]=r=>o.encontro.data=r),classes:{inner:"h-7"},label:"Data",type:"date"},null,8,["modelValue"])]),e("div",be,[n(m,{modelValue:o.encontro.horaInicio,"onUpdate:modelValue":t[4]||(t[4]=r=>o.encontro.horaInicio=r),classes:{inner:"h-7"},label:"Hor\xE1rio in\xEDcio",type:"time"},null,8,["modelValue"])]),e("div",ye,[n(m,{modelValue:o.encontro.horaTermino,"onUpdate:modelValue":t[5]||(t[5]=r=>o.encontro.horaTermino=r),classes:{inner:"h-7"},label:"Hor\xE1rio T\xE9rmino",type:"time"},null,8,["modelValue"])]),e("div",we,[n(p,{size:"6pt",class:"px-1 text-[7pt]",onClick:l.addEncontro},{default:i(()=>[De,Ce]),_:1},8,["onClick"])])])])]),e("div",Ie,[Ve,o.encontros.length==0?(h(),_("div",Ee," sem informa\xE7\xF5es ")):D("",!0),o.encontros.length>0?(h(),_("div",ke,[Te,e("div",Pe,[f(d(l.moment(o.periodo.dataInicio).format("DD/MM/YYYY"))+" ",1),e("span",Ue," ("+d(l.moment(o.periodo.dataInicio).locale("pt-br").format("dddd").split("-")[0])+") ",1)]),$e,e("div",Ye,[f(d(l.moment(o.periodo.dataTermino).format("DD/MM/YYYY"))+" ",1),e("span",ze," ("+d(l.moment(o.periodo.dataTermino).locale("pt-br").format("dddd").split("-")[0])+") ",1)])])):D("",!0)]),e("div",Ae,[Fe,o.encontros.length==0?(h(),_("div",Ne," sem informa\xE7\xF5es ")):D("",!0),o.encontros.length>0?(h(),_("div",Se,[(h(!0),_(R,null,G(o.encontros,(r,u)=>(h(),_("div",{class:"flex rounded bg-white p-1 text-[9pt] my-[3px]",key:u},[e("div",Qe,[f(d(l.moment(r.data).format("DD/MM/YYYY"))+" ",1),e("span",qe," ("+d(l.moment(r.data).locale("pt-br").format("dddd").split("-")[0])+") ",1)]),Me,e("div",He,d(r.horaInicio),1),Be,e("div",Ke,d(r.horaTermino),1),e("div",je,[n(p,{onClick:c=>l.removerEncontro(u),class:"ml-2 bg-red-900 text-white",size:"4px",round:""},{default:i(()=>[Je,n(F,null,{default:i(()=>[Oe]),_:1})]),_:2},1032,["onClick"])])]))),128))])):D("",!0)])])}var Ge=P(re,[["render",Re]]);const Le={components:{FormKitSchema:L,encontros:Ge},data(){return{dialog:!1,inputCss:{inner:"h-7 text-[8pt] fw-700"},formData:{id:"",semestre:"2022/2",horasAtividade:0,nome:"",descr:""},isUpdate:!1}},watch:{},mounted(){},methods:{uuidv4(s){return s.normalize("NFD").replace(/[ \u0300-\u036f]/g,"").toUpperCase().substr(0,10)+([1e7]+-1e3+-4e3+-8e3+-1e11).replace(/[018]/g,a=>(a^crypto.getRandomValues(new Uint8Array(1))[0]&15>>a/4).toString(16)).substr(0,6)},show(s){if(console.log(s),s!=null){this.isUpdate=!0,this.formData=JSON.parse(JSON.stringify(s));let t=[];for(let a in this.formData.encontros)t.push(this.formData.encontros[a]);this.formData.encontros=N.orderBy(t,["data","horaInicio"],["asc","asc"]),this.dialog=!0,this.$nextTick(()=>{this.$refs.encontrosref.init(this.formData)})}else this.isUpdate=!1,this.formData={id:"",semestre:"2022/2",horasAtividade:0,nome:"",descr:""},this.formData.id=this.uuidv4("FM-"),this.dialog=!0,this.$nextTick(()=>{this.$refs.encontrosref.reset()})},submitForm(){this.$formkit.submit("formacao")},submitHandler(s){alert(`Submitted ${s} successfully!`)},submitHandler(){let s=this;console.log("submit");let t={id:this.formData.id,setor:"salamais",nome:this.formData.nome,descr:this.formData.descr,semestre:this.formData.semestre,horasAtividade:this.formData.horasAtividade},a=this.$refs.encontrosref.getEncontros();if(console.log("dados",a),a.encontros.length==0){this.$q.notify(v.error("Nenhum encontro cadastrado. Encontros s\xE3o obrigat\xF3rios!"));return}let x={};for(let o in a.encontros)x[a.encontros[o].id]=a.encontros[o];a.encontros=x,t=w(w({},t),a),console.log("item",t),this.isUpdate?(T(I(V,"/salamais/formacoes/"+t.id),t),s.$q.notify(v.success("Forma\xE7\xE3o alterada com sucesso")),s.dialog=!1):(T(I(V,"/salamais/formacoes/"+t.id),t),s.$q.notify(v.success("Forma\xE7\xE3o cadastrada com sucesso")),s.dialog=!1)}}},We={class:"bg-white"},Ze=e("div",{class:"fw-600"}," Forma\xE7\xE3o ",-1),Xe=f("Close"),es={class:"p-1"},ss={class:"border rounded p-2"},ts={class:"grid grid-cols-5"},os={class:"col-span-1 px-2"},as={class:"col-span-1 px-2"},ns={class:"px-2"},is={class:"px-2"},rs={class:"px-2"},ls=e("div",{class:"text-xs fw-500"}," Descri\xE7\xE3o da forma\xE7\xE3o ",-1),cs={class:"px-2 mt-4"},ds=e("hr",{class:"my-2"},null,-1),ms={class:"text-right mr-4"},us=e("span",{class:"iconify text-[10pt] mr-1","data-icon":"ic:save"},null,-1),hs=f(" Salvar ");function ps(s,t,a,x,o,l){const m=g("FormKit"),r=g("encontros");return h(),A(ee,{modelValue:o.dialog,"onUpdate:modelValue":t[2]||(t[2]=u=>o.dialog=u),"transition-show":"slide-up","transition-hide":"slide-down"},{default:i(()=>[e("div",We,[n(Z,{class:"flex justify-between bg-slate-200"},{default:i(()=>[Ze,W((h(),A(p,{dense:"",round:"",size:"sm",icon:"close"},{default:i(()=>[n(F,{class:"bg-white text-primary"},{default:i(()=>[Xe]),_:1})]),_:1})),[[se]])]),_:1}),e("div",es,[e("div",ss,[n(m,{id:"formacao",type:"form",modelValue:o.formData,"onUpdate:modelValue":t[1]||(t[1]=u=>o.formData=u),actions:!1,onSubmit:l.submitHandler},{default:i(()=>[e("div",ts,[e("div",os,[n(m,{name:"id",label:"ID",help:"Uso interno",disabled:"",classes:o.inputCss},null,8,["classes"])]),e("div",as,[n(m,{type:"select",name:"semestre",label:"Semestre",help:"Semestre letivo",classes:o.inputCss,options:["2022/2","2023/1","2023/2"]},null,8,["classes"])]),e("div",ns,[n(m,{name:"horasAtividade",label:"Carga Hor\xE1ria",help:"CH de atividade",required:"",classes:o.inputCss,validation:"required|number"},null,8,["classes"])])]),e("div",is,[n(m,{name:"nome",label:"Nome da forma\xE7\xE3o",help:"Nome da forma\xE7\xE3o / trilha",required:"",classes:o.inputCss,validation:"required"},null,8,["classes"])]),e("div",rs,[ls,n(X,{dense:"",rows:2,class:"text-xs",modelValue:o.formData.descr,"onUpdate:modelValue":t[0]||(t[0]=u=>o.formData.descr=u),outlined:"",type:"textarea"},null,8,["modelValue"])]),e("div",cs,[n(r,{ref:"encontrosref"},null,512)])]),_:1},8,["modelValue","onSubmit"]),ds,e("div",ms,[n(p,{onClick:l.submitForm,size:"sm",outline:"",class:"text-slate-800 px-3"},{default:i(()=>[us,hs]),_:1},8,["onClick"])])])])])]),_:1},8,["modelValue"])}var fs=P(Le,[["render",ps]]);const _s={components:{dialogformacao:fs},data(){return{filter:"",columns:[{label:"ID",align:"left",sortable:!0},{label:"Nome",field:"nome",align:"left",sortable:!0},{label:"Per\xEDodo",field:"dataInicio",align:"left",sortable:!0},{label:"",sortable:!1}],rows:[],removeDialog:[]}},computed:{moment(){return b}},mounted(){this.load()},methods:{load(){let s=this;te(I(V,"/salamais/formacoes"),t=>{let a=oe(t);s.rows=a,s.$forceUpdate()})},excluir(s){let t=this;this.removeDialog[s.id]=!1,console.log(s),T(I(V,"/salamais/formacoes/"+s.id),null),t.$q.notify(v.success("Forma\xE7\xE3o excluida com sucesso"))}}},xs=e("div",{class:"mx-4 my-1 pt-2 fw-500"}," Forma\xE7\xF5es ",-1),vs={class:"mx-4"},gs={class:"w-full"},bs={class:"p-1 flex items-center justify-between"},ys={class:"flex items-center"},ws={class:"-mb-2"},Ds=e("div",{class:"pl-1"},[e("span",{class:"iconify text-[14pt]","data-icon":"mi:search"})],-1),Cs=e("span",{class:"iconify text-[12pt] mr-1","data-icon":"ion:add-circle-outline"},null,-1),Is=f(" adicionar forma\xE7\xE3o "),Vs={class:"text-[8pt]"},Es={class:"text-[8pt] hover:font-bold hover:text-slate-500"},ks={class:"text-[8pt]"},Ts=e("span",{class:"px-1 text-[7pt]"},"at\xE9",-1),Ps={class:"text-[8pt]"},Us=e("span",{class:"iconify text-[10pt]","data-icon":"mi:edit"},null,-1),$s=e("span",{class:"iconify text-[10pt]","data-icon":"mi:delete"},null,-1),Ys={class:"rounded w-[200px]"},zs=e("div",{class:"flex p-1 bg-red-800 text-white"},[e("div",{class:"text-[10pt] px-1"},[e("span",{class:"iconify","data-icon":"mdi:warning"})]),e("div",{class:"text-[8pt] fw-700"},"Deseja realmente excluir o item?")],-1),As={class:"flex justify-around p-2"},Fs=f("cancelar "),Ns=f(" sim");function Ss(s,t,a,x,o,l){const m=g("FormKit"),r=g("router-link"),u=g("dialogformacao");return h(),_("div",null,[xs,e("div",vs,[n(ie,{dense:"",pagination:{rowsPerPage:20},rows:o.rows,filter:o.filter,columns:o.columns,"row-key":"name"},{top:i(()=>[e("div",gs,[e("div",bs,[e("div",ys,[e("div",ws,[n(m,{modelValue:o.filter,"onUpdate:modelValue":t[0]||(t[0]=c=>o.filter=c),classes:{inner:"h-7"},type:"text",placeholder:"Filtrar"},null,8,["modelValue"])]),Ds]),e("div",null,[n(p,{size:"xs",class:"px-2",onClick:t[1]||(t[1]=c=>s.$refs.dialogformacaoref.show())},{default:i(()=>[Cs,Is]),_:1})])])])]),body:i(c=>[n(ne,{props:c},{default:i(()=>[n(C,null,{default:i(()=>[e("span",Vs,d(c.row.id),1)]),_:2},1024),n(C,null,{default:i(()=>[n(r,{to:{path:"/formacao/"+c.row.id}},{default:i(()=>[e("span",Es,d(c.row.nome),1)]),_:2},1032,["to"])]),_:2},1024),n(C,null,{default:i(()=>[e("span",ks,d(l.moment(c.row.dataInicio).format("DD/MM/YYYY")),1),Ts,e("span",Ps,d(l.moment(c.row.dataTermino).format("DD/MM/YYYY")),1)]),_:2},1024),n(C,null,{default:i(()=>[n(p,{onClick:y=>s.$refs.dialogformacaoref.show(c.row),round:"",size:"xs",class:"bg-gray-200"},{default:i(()=>[Us]),_:2},1032,["onClick"]),n(p,{round:"",size:"xs",class:"ml-2 bg-gray-400"},{default:i(()=>[$s,n(ae,{modelValue:o.removeDialog[c.row.id],"onUpdate:modelValue":y=>o.removeDialog[c.row.id]=y},{default:i(()=>[e("div",Ys,[zs,e("div",As,[n(p,{onClick:y=>o.removeDialog[c.row.id]=!1,size:"xs"},{default:i(()=>[Fs]),_:2},1032,["onClick"]),n(p,{onClick:y=>l.excluir(c.row),class:"bg-red-800 text-white",size:"xs"},{default:i(()=>[Ns]),_:2},1032,["onClick"])])])]),_:2},1032,["modelValue","onUpdate:modelValue"])]),_:2},1024)]),_:2},1024)]),_:2},1032,["props"])]),_:1},8,["rows","filter","columns"])]),n(u,{ref:"dialogformacaoref"},null,512)])}var js=P(_s,[["render",Ss]]);export{js as default};

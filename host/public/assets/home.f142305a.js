import{_ as k,u as q,m as B,q as x,e as N,o as w,r as d,a as m,b as S,c as l,d as f,f as i,F as V,g as C,h as D,i as p,s as I,j as u,k as n,l as g}from"./index.2bd1149f.js";import{d as F}from"./dialog-inscricao.3b3944ca.js";import{f as j}from"./caixa-formacao.75e1d637.js";import{f as A}from"./caixa-formacao-insc.c425693e.js";import{_ as v}from"./lodash.b87f4b09.js";import"./caixa-formacao-info.1312eccb.js";import"./badge-area.51bfdf65.js";const E={components:{dialoginscricao:F,formacao:j,formacaoInscrito:A},data(){return{userStore:q(),formacoes:[],qtde:0}},computed:{moment(){return B}},mounted(){console.log("home mounted"),this.load()},methods:{load(){let r=this;if(this.qtde=0,this.userStore.user==null)return;let _=x(d(m,"/salamais/inscricoes"),w("userID"),N(this.userStore.user.id));S(_,h=>{let e=h.val();console.log("inscricoes",e),e!=null?p(d(m,"/salamais/formacoes")).then(a=>{let o=I(a);if(o!=null){o=v.orderBy(o,"dataInicio","asc"),console.log("formacoes",o);for(let s in o){o[s].inscricao=!1,o[s].dataInscricao="",o[s].opcao=0;for(let c in e)if(o[s].id==e[c].formacaoID){o[s].inscricaoID=e[c].id,o[s].inscricao=!0,o[s].dataInscricao=e[c].createdAt,o[s].inscEncontros=e[c].encontros;break}}r.formacoes=o,console.log("formacoes",o);for(let s in o)o[s].inscricao||r.qtde++}}):p(d(m,"/salamais/formacoes")).then(a=>{let o=I(a);o!=null&&(o=v.orderBy(o,"dataInicio","asc"),console.log("formacoes",o),r.formacoes=o,r.qtde=Object.keys(o).length)})})},inscricao(r){this.$refs.dialoginscricaoref.show(r)},novaInscricao(){this.load()}}},T={class:"m-1 p-2 border"},L=i("div",{class:"fw-600"}," Forma\xE7\xF5es 2022/2 ",-1),O=i("div",{class:"border-t mt-1 mb-3 mr-3"},null,-1),R={key:0},z=i("div",{class:"border rounded shadow p-1 text-xs fw-300 bg-slate-200"}," Nenhuma forma\xE7\xE3o dispon\xEDvel para inscri\xE7\xE3o ",-1),G=[z],H={class:"py-1 pr-3"},J=i("hr",{class:"mb-3 ml-4 border-8 bg-gray-300"},null,-1);function K(r,_,h,e,a,o){const s=u("formacao"),c=u("formacaoInscrito"),y=u("dialoginscricao");return n(),l("div",T,[L,O,a.qtde==0?(n(),l("div",R,G)):f("",!0),i("div",H,[(n(!0),l(V,null,C(a.formacoes,(t,b)=>(n(),l("div",{key:b},[t.inscricao?f("",!0):(n(),g(s,{key:0,formacao:t,onInscricao:o.inscricao},null,8,["formacao","onInscricao"])),t.inscricao?(n(),g(c,{key:1,formacao:t,onInscricao:o.inscricao},null,8,["formacao","onInscricao"])):f("",!0),J]))),128))]),D(y,{ref:"dialoginscricaoref",onNovaInscricao:o.novaInscricao},null,8,["onNovaInscricao"])])}var Z=k(E,[["render",K]]);export{Z as default};
